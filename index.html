<!doctype html>
<html>
<head>
  <title>CVP</title>
  
  <style>
    
     body {
background-color: #000000;
text-align: center;
}
       p {
color: white;
text-align: center;
}
      div {
color: white;
text-align: center;
}
       .center-title {
color: white;
text-align: center;
}
    .stack-btn {
width: 65px;
height: 25px;
border: "25";
background-color: #4CAF50;
color: white;
font-size: 16px;
cursor: pointer;
margin: 10px;
border-radius: 25px;
}

      .twist-btn {
width: 65px;
height: 25px;
border: "25";
background-color: #4CAF50;
color: white;
font-size: 16px;
cursor: pointer;
margin: 10px;
border-radius: 25px;
}

    .subway-btn {
width: 65px;
height: 25px;
border: "25";
background-color: #4CAF50;
color: white;
font-size: 16px;
cursor: pointer;
margin: 10px;
border-radius: 25px;
}

   .cols-btn {
width: 65px;
height: 25px;
border: "25";
background-color: #4CAF50;
color: white;
font-size: 16px;
cursor: pointer;
margin: 10px;
border-radius: 25px;
} 

</style>
<script>
function generateID() {
  // Get the user's IP address
  var ip = null;
  var req = new XMLHttpRequest();
  req.open('GET', 'https://api.ipify.org', false);
  req.send();
  if (req.status == 200) {
    ip = req.responseText;
  }

  // Check if the IP has an associated ID in the local storage
  var id = localStorage.getItem(ip);
  if (id === null) {
    // Generate a new ID if the IP doesn't have an associated ID
    id = Math.floor(100000 + Math.random() * 900000);
    localStorage.setItem(ip, id);
    // send the new id and ip to the server
    var data = {
      id: id,
      ip: ip
    };
    fetch('/save-id-ip', {
      method: 'POST',
      body: JSON.stringify(data),
      headers: {
        'Content-Type': 'application/json'
      }
    });
  }

  // Display the ID and IP in a text view
  var textView = document.getElementById("textView");
  textView.innerHTML = "ID: " + id + "<br>IP: " + ip;
}


</script>
</head>
<body onload="load()">
  <h1 class="center-title">Crypto ViT Pro</h1>
  <button onclick="generateID()">Generate ID</button>
  <div id="textView">ID</div>

  <p>Espacio de juegos.</p>
  <script>
    function load() {
        // Crear el botón de recargar vida
        var reloadBtn = document.createElement("BUTTON");
        reloadBtn.innerHTML = "Stack";
        reloadBtn.classList.add("stack-btn");
        document.body.appendChild(reloadBtn);
        
        var reloadBtn1 = document.createElement("BUTTON");
        reloadBtn1.innerHTML = "Twist";
        reloadBtn1.classList.add("twist-btn");
        document.body.appendChild(reloadBtn1);
        
        var reloadBtn2 = document.createElement("BUTTON");
        reloadBtn2.innerHTML = "Subway";
        reloadBtn2.classList.add("subway-btn");
        document.body.appendChild(reloadBtn2);
        
        var reloadBtn3 = document.createElement("BUTTON");
        reloadBtn3.innerHTML = "Cols";
        reloadBtn3.classList.add("cols-btn");
        document.body.appendChild(reloadBtn3);

        // Crear el widget para mostrar el WebView
        var widget = document.createElement("DIV");
        widget.setAttribute("id", "widget");
        widget.style.display = "none";
        document.body.appendChild(widget);

        var webView = document.createElement("IFRAME");
        webView.setAttribute("id", "webView");
        webView.style.borderRadius = "25px";
        
        if (Window.innerwidth < 1080) {
            webView.style.height = "70%";
            webView.style.width = "100%";
        } else {
          webView.style.height = "840px";
            webView.style.width = "100%";
           } 
           
        widget.appendChild(webView);

        // Asignar función al botón de recargar vida
        reloadBtn.onclick = function(){
          widget.style.display = "block";
          webView.src = "https://www.minijuegos.com/juego/stack/jugar" ;
        }
        reloadBtn1.onclick = function(){
          widget.style.display = "block";
          webView.src = "https://www.minijuegos.com/juego/tower-twist/jugar" ;
        }
        reloadBtn2.onclick = function(){
          widget.style.display = "block";
          webView.src = "https://www.minijuegos.com/juego/subway-surfers-winter-holiday/jugar" ;
        }
        reloadBtn3.onclick = function(){
          widget.style.display = "block";
          webView.src = "https://www.minijuegos.com/juego/crazy-switch-color/jugar" ;
        }
    }
    
    
    // Lista de servidores de anuncios a bloquear
var blockList = ["adserver1.com", "adserver2.net", "adserver3.org"];

// Sobreescribir la función fetch para interceptar las peticiones
var originalFetch = window.fetch;
window.fetch = function(input, init) {
    var url = new URL(input);
    if (blockList.indexOf(url.hostname) !== -1) {
        // Si la petición está dirigida a un servidor de anuncios, rechazarla
        return Promise.reject("Petición bloqueada a " + url.hostname);
    }
    // Si no es un servidor de anuncios, ejecutar la petición original
    return originalFetch(input, init);
}

    
  </script>

</body></html>
